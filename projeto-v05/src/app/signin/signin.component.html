<div class="row mt-3 mb-3 justify-content-center">

  <div class="col-10">

    <h1 class="text-center">Faça o seu registro e  aproveite as ofertas!</h1>

    <form #form="ngForm" [formGroup]="usuarioForm" (submit)="submit()">

      <div class="form-group">
        <label for="nome">Nome</label>
        <input type="text" class="form-control" id="nome" name="nome" formControlName="nome" required>


        <div class="alert alert-danger" *ngIf="(usuarioForm.get('nome')?.errors?.required ||usuarioForm.get('nome')?.errors?.minlength ||
        usuarioForm.get('nome')?.errors?.maxlength) && (usuarioForm.get('nome')?.touched || form.submitted)">
          Informe o seu nome (6 a 150 caracteres)!
        </div>


        <!--
    <div class="alert alert-success" *ngIf="(usuarioForm.get('nome')?.valid && form.submitted); else elseBlock">
          Nome informado corretamente!
        </div>

        <ng-template #elseBlock>
          <div class="alert alert-danger" *ngIf="usuarioForm.get('nome')?.errors?.required && form.submitted">
            <span>
              Informe o seu nome!
            </span>

          </div>

          <div class="alert alert-danger" *ngIf="(usuarioForm.get('nome')?.errors?.minlength || usuarioForm.get('nome')?.errors?.maxlength) && form.submitted">
            <span>
              O nome deve conter de 6 a 150 caracteres!
            </span>
          </div>

        </ng-template>

-->


 <!-- Original

        <div class="alert alert-danger" *ngIf="usuarioForm.get('nome')?.errors?.required && form.submitted">
          Informe o seu nome!
        </div>

        <div class="alert alert-danger" *ngIf="(usuarioForm.get('nome')?.errors?.minlength ||
        usuarioForm.get('nome')?.errors?.maxlength) && form.submitted; else elseBlock">
          O nome deve conter de 6 a 150 caracteres!
        </div>

        <ng-template #elseBlock>
          <div class="alert alert-success" *ngIf="usuarioForm.get('nome')?.valid && form.submitted">
            Nome informado corretamente!
          </div>
        </ng-template>
        -->

        <!--
        <div class="alert alert-danger" *ngIf="(usuarioForm.get('nome')?.errors?.minlength ||
        usuarioForm.get('nome')?.errors?.maxlength) && form.submitted; else elseBlock">
          O nome deve conter de 6 a 150 caracteres!
        </div>

        <ng-template #elseBlock>
          <div class="alert alert-success">
            Nome informado corretamente!
          </div>
        </ng-template>
        -->

      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" name="email" formControlName="email" required>

        <div class="alert alert-danger" *ngIf="(usuarioForm.get('email')?.errors?.required || usuarioForm.get('email')?.errors?.email) &&
        (usuarioForm.get('email')?.touched || form.submitted)">
          Informe o e-mail corretamente!
        </div>

      </div>

      <div class="form-group">
        <label for="senha">Senha</label>
        <input type="password" class="form-control" id="senha" name="senha" formControlName="senha" required>

        <div class="alert alert-danger" *ngIf="(usuarioForm.get('senha')?.errors?.required ||usuarioForm.get('senha')?.errors?.minlength) &&
        (usuarioForm.get('senha')?.touched || form.submitted)">
          Informe uma senha com pelo menos 6 caracteres!
        </div>
      </div>



      <div class="form-group">
        <label for="idade">Idade</label>
        <input type="number" class="form-control" id="idade" name="idade" formControlName="idade" required>

        <div class="alert alert-danger" *ngIf="(usuarioForm.get('idade')?.errors?.required || usuarioForm.get('idade')?.errors?.min) &&
        (usuarioForm.get('idade')?.touched || form.submitted)">
          Informe a idade!
        </div>
      </div>



      <div class="form-group">
        <label for="cidade">Cidade</label>
        <input type="text" class="form-control" id="cidade" name="cidade" formControlName="cidade" required>

        <div class="alert alert-danger" *ngIf="usuarioForm.get('cidade')?.errors?.required &&
        (usuarioForm.get('cidade')?.touched || form.submitted)">
          Informe a cidade!
        </div>
      </div>

      <div class="form-group">
        <h3>Gênero</h3>

        <div class="form-check">
          <input class="form-check-input" type="radio" name="genero" id="masculino" value="m" formControlName="genero">
          <label class="form-check-label" for="masculino">Masculino</label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="radio" name="genero" id="feminino" value="f" formControlName="genero">
          <label class="form-check-label" for="feminino">Feminino</label>
        </div>

        <div class="alert alert-danger" *ngIf="usuarioForm.get('genero')?.errors?.required && form.submitted">
          Selecione o gênero.
        </div>
      </div>


      <div class="form-group">
        <h3>Promoções</h3>

        <div *ngFor="let obj of promocoesLista; let i=index">
          <label>
            {{obj.nome}}
            <input type="checkbox" [checked]="obj.checked" [value]="obj.value"
            (change)="onChangeCheckbox($event, i)">
          </label>
        </div>

      </div>

      <button [disabled]="!form.valid" (click)="submit()" type="submit" class="btn btn-success btn-block">
        Salvar
      </button>

      <button [routerLink]="['/login']" type="button" class="btn btn-secondary btn-block">
        Cancelar
      </button>


    </form>

  </div>

</div>
