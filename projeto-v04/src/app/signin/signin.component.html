<div class="row mt-3 mb-3 justify-content-center">

  <div class="col-10">

    <h1 class="text-center">Faça o seu registro e aproveite!</h1>

    <form #form="ngForm" [formGroup]="usuarioForm" (submit)="salvar()">

      <div class="form-group">
        <label for="nome">Nome</label>

        <input type="text" name="nome" class="form-control" id="nome" formControlName="nome" required>

        <div class="alert alert-danger mt-1"
        *ngIf="(usuarioForm.get('nome')?.errors?.required ||
        usuarioForm.get('nome')?.errors?.minlength ||
        usuarioForm.get('nome')?.errors?.maxlength) &&
        (usuarioForm.get('nome')?.touched || form.submitted)">
          Informe o nome (6 a 150 caracteres)
        </div>

      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" name="email" class="form-control" id="email" formControlName="email" required>

        <div class="alert alert-danger mt-1"
        *ngIf="(usuarioForm.get('email')?.errors?.required || usuarioForm.get('email')?.errors?.email) && (usuarioForm.get('email')?.touched || form.submitted)">
          Informe o e-mail corretamente
        </div>

      </div>

      <div class="form-group">
        <label for="senha">Senha</label>
        <input type="password" name="senha" class="form-control" id="senha" formControlName="senha" required>

        <div class="alert alert-danger" *ngIf="(usuarioForm.get('senha')?.errors?.required || usuarioForm.get('senha')?.errors?.minlength) &&
        (usuarioForm.get('senha')?.touched || form.submitted)">
          Informe uma senha com pelo menos 6 caracteres
        </div>
      </div>

      <div class="form-group">
        <label for="idade">Idade</label>
        <input type="number" name="idade" class="form-control" id="idade" formControlName="idade" required>

        <div class="alert alert-danger" *ngIf="(usuarioForm.get('idade')?.errors?.required || usuarioForm.get('idade')?.errors?.min) &&
        (usuarioForm.get('idade')?.touched || form.submitted)">
          Informe a idade
        </div>
      </div>

      <div class="form-group">
        <label for="cidade">Cidade</label>
        <input type="text" name="cidade" class="form-control" id="cidade" formControlName="cidade" required>

        <div class="alert alert-danger" *ngIf="usuarioForm.get('cidade')?.errors?.required && (usuarioForm.get('cidade')?.touched || form.submitted)">
          Informe a cidade
        </div>
      </div>

      <div class="form-group">
        <h3>Gênero</h3>

        <div class="form-check">
          <input type="radio" id="m" name="genero" value="m" formControlName="genero">
          <label class="form-check-label" for="masculino">Masculino</label>
        </div>

        <div class="form-check">
          <input type="radio" id="f" name="genero" value="f" formControlName="genero">
          <label class="form-check-label" for="feminino">Feminino</label>
        </div>

        <div class="alert alert-danger" *ngIf="usuarioForm.get('genero')?.errors?.required && (usuarioForm.get('genero')?.touched || form.submitted)">
          Selecione o gênero.
        </div>
      </div>


      <div class="form-group">
        <h3>Promoções</h3>
        <p>Selecione os tipos de promoções que você deseja receber ofertas</p>

        <div *ngFor="let obj of promocoesLista; let i=index">
          <label>
            {{obj.nome}}
            <input type="checkbox" name="obj.value" [checked]="obj.checked" [value]="obj.value" (change)="onSelectionChange($event, i)">
            <br>
          </label>
        </div>

      </div>



      <button [disabled]="!form.valid" type="submit" class="btn btn-success btn-block">
        Salvar
      </button>

    </form>

  </div>

</div>
